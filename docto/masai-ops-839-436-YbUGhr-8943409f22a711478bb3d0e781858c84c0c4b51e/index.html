<!DOCTYPE html>
<html>

<head>
  <title>Masai Doctor Records</title>
</head>

<body>
  <!-- Use this form for data input  -->
  <form>
    <input placeholder="Name" type="text" id="name" />
    <br>
    <input placeholder="Doctor ID" type="text" id="doctor_id" />
    <br>
    <select id="specialization">
      <option value=""></option>
      <option value="Dermatologist">Dermatologist</option>
      <option value="Dentist">Dentist</option>
      <option value="Gynecologist">Gynecologist</option>
    </select>
    <br>
    <input placeholder="Experience" type="number" id="experience" />
    <br>
    <input placeholder="Email" type="email" id="email" />
    <br>
    <input placeholder="Mobile No." type="number" id="mobile" />
    <br>
    <input type="submit" value="Submit" />
    <br>
  </form>

  <!-- Use this Select tag for filter part  -->
  <select id="filter">
    <option value=''>Select Specialization</option>
    <option value="Dermatologist">Dermatologist</option>
    <option value="Dentist">Dentist</option>
    <option value="Gynecologist">Gynecologist</option>
  </select>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Doctor ID</th>
        <th>Specialization</th>
        <th>Experience in Years</th>
        <th>Email</th>
        <th>Mobile No</th>
        <th>Role</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
      <!-- Append Rows here using JS & DOM  -->
    </tbody>
  </table>
</body>

<script>
  let form = document.querySelector("form")
  let name = document.getElementById("name")
  let doctor_id = document.getElementById("doctor_id")
  let specialization = document.getElementById("specialization")
  let experience = document.getElementById("experience")
  let email = document.getElementById("email")
  let mobile = document.getElementById("mobile")
  let tbody = document.querySelector("tbody")
  
  let arr = []
  // let specialization=document.getElementById("")


  

form.addEventListener("submit", function (e) 
  {
       e.preventDefault();

      let obj = {
      name: name.value,
      doctor_id: doctor_id.value,
      specialization: specialization.value,
      experience: experience.value,
      email: email.value,
      mobile: mobile.value
       }
    arr.push(obj)
   Doctor(arr)

  })   

  let filters = document.getElementById("filter")
    filters.addEventListener("change",function()
    {  
      if(filters.value=="")
      {
        Doctor(arr)
        
      }
      else
      {

            let filtred = arr.filter(function(element)
              {
       
        
              if(element.specialization==filters.value)
              {
                return true
              }
              else{
                return false
              }
        
      })
      Doctor(filtred)
    }
      // console.log(filtred)
    
    })





    function Doctor(ar) 
    {
        
      tbody.innerHTML = null
      for (let i = 0; i < ar.length; i++) 
      {



        let tr = document.createElement("tr")
        let td1 = document.createElement("td")
        let td2 = document.createElement("td")
        let td3 = document.createElement("td")
        let td4 = document.createElement("td")
        let td5 = document.createElement("td")
        let td6 = document.createElement("td")
        let td7 = document.createElement("td")
        let td8 = document.createElement("button")


        td1.innerText = ar[i].name
        td2.innerText = ar[i].doctor_id
        td3.innerText = ar[i].specialization
        td4.innerText = ar[i].experience
        td5.innerText = ar[i].email
        td6.innerText = ar[i].mobile



        if (Number(ar[i].experience) > 5) {
          td7.innerText = "Senior"
        }
        else if (Number(ar[i].experience) >= 2 && Number(ar[i].experience) <= 5) {
          td7.innerText = "Junior"
        }
        else {
          td7.innerText = "Trainee"
        }

        td8.innerText = "Delete"
        td8.addEventListener("click", function () {
          let Del = ar.filter(function (el, ind) {
            if (i == ind) {
              return false;
            }
            else {
              return true
            }
          })
          doctor(Del)

        })

        tr.append(td1, td2, td3, td4, td5, td6, td7, td8)
        tbody.append(tr)
      }
    }


    







    


 










</script>

</html>